<style>
    .choice-chips {
        width: 200px;
        display: flex;
        position: relative;
    }

    .choice-chips .choice-chip__bg {
        position: absolute;
        background-color: #00f;
        width: 50%;
        height: 100%;
        left: 0;
        transition: left 0.3s;
    }

    .choice-chips .choice-chip {
        width: 50%;
        position: relative;
        z-index: 1;
        background-color: transparent;
        border: 0;
        cursor: pointer;
    }

    .choice-chips .choice-chip.active {
        color: #fff;
    }
</style>

<div class="choice-chips">
    <div class="choice-chip__bg"></div>
    <button class="choice-chip active">Option 1</button>
    <button class="choice-chip">Option 2</button>
    <input class="choice-chip__value" type="hidden" value="option1" />
</div>

<script>
    window.onload = function() {
        var choiceChip = document.querySelectorAll('.choice-chip');
        var choiceChipBg = document.querySelector('.choice-chip__bg');
        var choiceChipValue = document.querySelector('.choice-chip__value');

        choiceChip.forEach((chip, index) => {
            chip.addEventListener('click', function() {
                choiceChip.forEach(c => c.classList.remove('active'));
                this.classList.add('active');

                if (choiceChipBg) {
                    choiceChipBg.style.left = `${50 * index}%`;
                }

                var newValue = this.innerHTML;
                newValue = newValue.toLowerCase().replace(/\s/g,'');
                choiceChipValue.value = newValue;
            });
        });
    };
</script>